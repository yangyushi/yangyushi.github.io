<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>MySQL 简介</title>
    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="stylesheet" href="/assets/css/styles/github-gist.css">
    <script src="https://unpkg.com/lunr/lunr.js"></script>

    <script src="/assets/js/toc.js"></script>
    <script src="/assets/js/highlight.pack.js"></script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true
        }
      });
    </script>

    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    </head>

  <body>
    <script>hljs.initHighlightingOnLoad();</script>

    <div class="main">
        <p><a href="/" id="backToHomeButton">Home</a></p>

<div id="side_bar">
    05 Apr 2017
</div>

<div class="center post">
    <ul id="markdown-toc">
  <li><a href="#简介" id="markdown-toc-简介">简介</a>    <ul>
      <li><a href="#数据库和sql介绍" id="markdown-toc-数据库和sql介绍">数据库和SQL介绍</a></li>
      <li><a href="#mysql-介绍" id="markdown-toc-mysql-介绍">MySQL 介绍</a></li>
      <li><a href="#一些基本命令" id="markdown-toc-一些基本命令">一些基本命令</a></li>
    </ul>
  </li>
  <li><a href="#创建一个数据库并插入语句" id="markdown-toc-创建一个数据库并插入语句">创建一个数据库并插入语句</a>    <ul>
      <li><a href="#数据库和表" id="markdown-toc-数据库和表">数据库和表</a></li>
      <li><a href="#mysql-中的数据类型" id="markdown-toc-mysql-中的数据类型">MySQL 中的数据类型</a></li>
      <li><a href="#创建数据库和表" id="markdown-toc-创建数据库和表">创建数据库和表</a></li>
      <li><a href="#向表中插入数据" id="markdown-toc-向表中插入数据">向表中插入数据</a></li>
    </ul>
  </li>
  <li><a href="#约束" id="markdown-toc-约束">约束</a>    <ul>
      <li><a href="#主键" id="markdown-toc-主键">主键</a></li>
      <li><a href="#默认值约束" id="markdown-toc-默认值约束">默认值约束</a></li>
      <li><a href="#唯一约束" id="markdown-toc-唯一约束">唯一约束</a></li>
      <li><a href="#外键约束" id="markdown-toc-外键约束">外键约束</a></li>
      <li><a href="#非空约束" id="markdown-toc-非空约束">非空约束</a></li>
    </ul>
  </li>
  <li><a href="#select语句详解" id="markdown-toc-select语句详解">SELECT语句详解</a>    <ul>
      <li><a href="#基本-select-语句" id="markdown-toc-基本-select-语句">基本 SELECT 语句</a></li>
      <li><a href="#限制条件" id="markdown-toc-限制条件">限制条件</a></li>
      <li><a href="#对结果排序" id="markdown-toc-对结果排序">对结果排序</a></li>
      <li><a href="#使用内置函数进行计算" id="markdown-toc-使用内置函数进行计算">使用内置函数进行计算</a></li>
      <li><a href="#子查询" id="markdown-toc-子查询">子查询</a></li>
      <li><a href="#连接查询" id="markdown-toc-连接查询">连接查询</a></li>
    </ul>
  </li>
  <li><a href="#修改与删除" id="markdown-toc-修改与删除">修改与删除</a>    <ul>
      <li><a href="#基本命令" id="markdown-toc-基本命令">基本命令</a></li>
      <li><a href="#对列进行修改" id="markdown-toc-对列进行修改">对列进行修改</a></li>
    </ul>
  </li>
  <li><a href="#其他" id="markdown-toc-其他">其他</a>    <ul>
      <li><a href="#索引" id="markdown-toc-索引">索引</a></li>
      <li><a href="#视图" id="markdown-toc-视图">视图</a></li>
      <li><a href="#导入" id="markdown-toc-导入">导入</a></li>
      <li><a href="#导出" id="markdown-toc-导出">导出</a></li>
      <li><a href="#备份" id="markdown-toc-备份">备份</a></li>
      <li><a href="#恢复" id="markdown-toc-恢复">恢复</a></li>
    </ul>
  </li>
</ul>

<h2 id="简介">简介</h2>

<h3 id="数据库和sql介绍">数据库和SQL介绍</h3>

<ul>
  <li>数据库（Database）是按照数据结构来组织、存储和管理数据的仓库</li>
  <li>结构化查询语言(Structured Query Language)简称SQL，是上世纪70年代由IBM公司开发，用于对数据库进行操作的语言。</li>
</ul>

<h3 id="mysql-介绍">MySQL 介绍</h3>
<ul>
  <li>MySQL是一个DBMS（数据库管理系统），由瑞典MySQLAB公司开发，目前属于Oracle公司</li>
  <li>MySQL是关系型数据库管理系统（关联数据库：将数据保存在不同的表中，而不是将所有数据放在一个大仓库内，这样就增加了速度并提高了灵活性。）</li>
</ul>

<h3 id="一些基本命令">一些基本命令</h3>

<ul>
  <li>打开服务</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>service mysql start <span class="c">#打开 MySQL</span>
mysql <span class="nt">-u</span> root <span class="c">#使用 root 登陆</span>
</code></pre></div></div>

<ul>
  <li>查看数据库</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql&gt; show databases<span class="p">;</span> <span class="c"># 注意分号</span>
</code></pre></div></div>

<ul>
  <li>连接数据库</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql&gt; use database_name
</code></pre></div></div>

<ul>
  <li>查看表</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql&gt; show tables<span class="p">;</span> <span class="c"># 注意分号</span>
</code></pre></div></div>

<ul>
  <li>退出</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql&gt; <span class="nb">exit</span>
</code></pre></div></div>

<h2 id="创建一个数据库并插入语句">创建一个数据库并插入语句</h2>

<h3 id="数据库和表">数据库和表</h3>

<ul>
  <li>数据表（table）简称表，它是数据库最重要的组成部分之一</li>
  <li>数据库只是一个框架，表才是实质内容。</li>
  <li>一个数据库中一般会有多张表，这些各自独立的表通过建立关系被联接起来，才成为可以交叉查阅、一目了然的数据库</li>
  <li>下面是一个表的例子</li>
</ul>

<table>
<tr>
    <td>ID</td><td>Name</td><td>Gender</td>
</tr>
<tr>
    <td>054</td><td>Leo</td><td>Male</td>
</tr>
<tr>
    <td>055</td><td>Ken</td><td>Male</td>
</tr>
<tr>
    <td>056</td><td>Lily</td><td>Female</td>
    </tr>
</table>

<h3 id="mysql-中的数据类型">MySQL 中的数据类型</h3>

<table>
<tr><th>数据类型</th><th>大小(字节)</th><th>用途</th><th>格式</th></tr>
<tr><td>INT</td><td>4</td><td>整数</td><td></td></tr>
<tr><td>FLOAT</td><td>4</td><td>单精度浮点数</td><td></td></tr>
<tr><td>DOUBLE</td><td>4</td><td>双精度浮点数</td><td></td></tr>
<tr><td>ENUM</td><td></td><td>单选,比如性别</td><td>ENUM('a','b','c')</td></tr>
<tr><td>SET</td><td></td><td>多选</td><td>SET('1','2','3')</td></tr>
<tr><td>DATE</td><td>3</td><td>日期</td><td>YYYY-MM-DD</td></tr>
<tr><td>TIME</td><td>3</td><td>时间点或持续时间</td><td>HH:MM:SS</td></tr>
<tr><td>YEAR</td><td>1</td><td>年份值</td><td>YYYY</td></tr>
<tr><td>CHAR</td><td>0~255</td><td>定长字符串</td><td></td></tr>
<tr><td>VARCHAR</td><td>0~255</td><td>变长字符串</td><td></td></tr>
<tr><td>TEXT</td><td>0~65535</td><td>长文本数据</td><td></td></tr>
</table>

<h3 id="创建数据库和表">创建数据库和表</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">db_name</span><span class="p">;</span> <span class="o">#</span> <span class="err">一般将保留字大写，变量小写</span>
<span class="n">USE</span> <span class="n">db_name</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">table_name</span><span class="p">(</span>
<span class="n">col_1_name</span> <span class="nb">INT</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
<span class="n">col_2_name</span> <span class="nb">CHAR</span><span class="p">(</span><span class="mi">20</span><span class="p">),</span>
<span class="n">col_3_name</span> <span class="nb">CHAR</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="p">);</span>
</code></pre></div></div>

<h3 id="向表中插入数据">向表中插入数据</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="k">table_name</span><span class="p">(</span><span class="n">col_1_name</span><span class="p">,</span> <span class="n">col_2_name</span><span class="p">,</span> <span class="p">...)</span> <span class="k">VALUES</span> <span class="p">(</span><span class="n">c_1</span><span class="p">,</span> <span class="n">c_2</span><span class="p">,</span> <span class="p">...);</span>
<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="k">table_name</span><span class="p">;</span> <span class="o">#</span> <span class="err">查看表</span>
</code></pre></div></div>

<p>注意：</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">col_1_name</code> 必须是 <code class="language-plaintext highlighter-rouge">table_name</code> 中有的列，否则报错</li>
  <li><code class="language-plaintext highlighter-rouge">INSERT</code> 时可以缺省某一列，此时这一列会被 <code class="language-plaintext highlighter-rouge">NULL</code> 填充</li>
</ol>

<h2 id="约束">约束</h2>

<h3 id="主键">主键</h3>

<ul>
  <li><strong>主键</strong> (PRIMARY KEY) 是用于约束表中的一行，作为这一行的标识符</li>
  <li>在一张表中通过<strong>主键</strong>就能准确定位到一行</li>
  <li>行中的主键<strong>不能有重复</strong>且<strong>不能为空</strong></li>
  <li>定义主键
    <ul>
      <li>
        <p>方法 1</p>

        <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">table_name</span><span class="p">(</span>
  <span class="n">col_1</span> <span class="nb">INT</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">,</span>
  <span class="n">col_2</span> <span class="p">...,</span>
  <span class="p">);</span>
</code></pre></div>        </div>
      </li>
      <li>
        <p>方法 2</p>

        <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">table_name</span><span class="p">(</span>
  <span class="n">col_1</span> <span class="nb">INT</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
  <span class="n">col_2</span> <span class="p">...,</span>
  <span class="k">CONSTRAINT</span> <span class="n">Prim_key_name</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">col_1</span><span class="p">)</span> <span class="o">#</span><span class="n">Prim_key_name</span> <span class="err">为自定义名</span>
  <span class="p">);</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>
    <p>定义复合主键</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">CONSTRAINT</span> <span class="n">Prim_key_name</span> <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">col_1</span><span class="p">,</span> <span class="n">col_2</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="默认值约束">默认值约束</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">col</span> <span class="nb">INT</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="s1">'default_value'</span><span class="p">,</span>
</code></pre></div></div>

<h3 id="唯一约束">唯一约束</h3>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">UNIQUE</span><span class="p">(</span><span class="n">col</span><span class="p">),</span>
</code></pre></div></div>

<h3 id="外键约束">外键约束</h3>

<ul>
  <li>
    <p><strong>每个外键必须 REFERENCES (参考) 另一个表的主键</strong>，被外键约束的列，取值必须在它参考的列中有对应值。</p>
  </li>
  <li>在 <code class="language-plaintext highlighter-rouge">INSERT</code> 时，如果被外键约束的值没有在参考列中有对应，则INSERT失败</li>
  <li>
    <p>创建外键约束</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">CONSTRAINT</span> <span class="n">key_name</span> <span class="k">FOREIGN</span> <span class="k">KEY</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="k">REFERENCES</span> <span class="n">ref_tb</span><span class="p">(</span><span class="n">ref_col</span><span class="p">),</span>
  <span class="o">#</span> <span class="n">key_name</span> <span class="o">-</span> <span class="err">外键名</span>
  <span class="o">#</span> <span class="n">col</span> <span class="o">-</span> <span class="err">被约束的列</span>
  <span class="o">#</span> <span class="n">ref_db</span> <span class="err">参考列所在的表</span>
  <span class="o">#</span> <span class="n">ref_col</span> <span class="err">参考列</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="非空约束">非空约束</h3>

<ul>
  <li>在MySQL中违反非空约束，不会报错，只会有警告</li>
  <li>输入为空时，用 0 填充</li>
  <li>
    <p>例子</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="n">col</span> <span class="nb">INT</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
</code></pre></div>    </div>
  </li>
</ul>

<h2 id="select语句详解">SELECT语句详解</h2>

<h3 id="基本-select-语句">基本 SELECT 语句</h3>

<p>格式：</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="err">要查询的列名</span> <span class="k">FROM</span> <span class="err">表名字</span> <span class="k">WHERE</span> <span class="err">限制条件</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="限制条件">限制条件</h3>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">WHERE</code> 后面的条件可以通过 <code class="language-plaintext highlighter-rouge">OR</code> 或 <code class="language-plaintext highlighter-rouge">AND</code> 连接</p>
  </li>
  <li>可通过 <code class="language-plaintext highlighter-rouge">IN</code> 和 <code class="language-plaintext highlighter-rouge">NOT IN</code> 来筛选 “在” 或 “不在” 某个范围内的结果
    <ul>
      <li>例子：查询在部门＃3 或部门＃4 的员工</li>
    </ul>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span><span class="n">age</span> <span class="k">FROM</span> <span class="n">employee</span> <span class="k">WHERE</span> <span class="n">in_dpt</span> <span class="k">IN</span> <span class="p">(</span><span class="s1">'dpt3'</span><span class="p">,</span><span class="s1">'dpt4'</span><span class="p">);</span>
</code></pre></div>    </div>
  </li>
  <li><code class="language-plaintext highlighter-rouge">Like</code> 与通配符
    <ul>
      <li>关键字 <code class="language-plaintext highlighter-rouge">LIKE</code> 在 SQL 语句中和通配符一起使用，通配符代表未知字符。</li>
      <li>SQL中的通配符是 <code class="language-plaintext highlighter-rouge">_</code> 和 <code class="language-plaintext highlighter-rouge">%</code>
        <ul>
          <li><code class="language-plaintext highlighter-rouge">_</code> 代表一个未指定字符</li>
          <li><code class="language-plaintext highlighter-rouge">%</code> 代表不定个未指定字符</li>
        </ul>
      </li>
      <li>语法 <code class="language-plaintext highlighter-rouge">WHERE 限制条件 LIKE 通配符</code>
        <ul>
          <li>例子：查询电话号码以 10 开头的员工</li>
        </ul>

        <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span><span class="n">phone</span> <span class="k">FROM</span> <span class="n">employee</span> <span class="k">WHERE</span> <span class="n">phone</span> <span class="k">LIKE</span> <span class="s1">'10%'</span><span class="p">;</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
</ul>

<h3 id="对结果排序">对结果排序</h3>

<p>格式</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="err">要查询的列名</span> <span class="k">FROM</span> <span class="err">表名字</span> <span class="k">WHERE</span> <span class="err">限制条件</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="err">排序列</span> <span class="k">ASC</span><span class="o">/</span><span class="k">DESC</span><span class="p">;</span>
</code></pre></div></div>

<p>其中，<code class="language-plaintext highlighter-rouge">ASC</code> 为升序，<code class="language-plaintext highlighter-rouge">DESC</code> 为降序；默认为升序</p>

<h3 id="使用内置函数进行计算">使用内置函数进行计算</h3>

<table>
<tr>
<td>函数名</td><td>COUNT</td><td>SUM</td><td>AVG</td><td>MAX</td><td>MIN</td>
</tr>
<tr>
<td>功能</td><td>计数</td><td>求和</td><td>均值</td><td>最大值</td><td>最小值</td>
</tr>
</table>

<p>语法：</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">FUNC</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="k">AS</span> <span class="n">new_name</span> <span class="k">FROM</span> <span class="k">table_name</span><span class="p">;</span>
<span class="o">#</span> <span class="k">As</span> <span class="n">new_name</span> <span class="err">可省略，作用是给</span> <span class="n">FUNC</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="err">重命名</span>
</code></pre></div></div>

<p>例子：</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="k">MAX</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="n">richest</span><span class="p">,</span> <span class="k">MIN</span><span class="p">(</span><span class="n">salary</span><span class="p">)</span> <span class="k">AS</span> <span class="n">easiest</span> <span class="k">FROM</span> <span class="n">employee</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="子查询">子查询</h3>

<p>查询结果可以作为更高一级查询的范围</p>

<p>例子：</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">col_1</span><span class="p">,</span> <span class="n">col_2</span> <span class="k">WHERE</span> <span class="n">col_1</span> <span class="k">IN</span> <span class="p">(</span><span class="k">SELECT</span> <span class="n">col_3</span> <span class="k">FROM</span> <span class="k">table_name</span><span class="p">);</span>
</code></pre></div></div>

<p>这段语句</p>

<ul>
  <li>先求出 <code class="language-plaintext highlighter-rouge">SELECT col_3 FROM table_name</code> 的结果</li>
  <li>再判断 <code class="language-plaintext highlighter-rouge">col_1</code> 是否在该结果中</li>
  <li>最终输出符合条件的 <code class="language-plaintext highlighter-rouge">col_1</code>, <code class="language-plaintext highlighter-rouge">col_2</code></li>
</ul>

<h3 id="连接查询">连接查询</h3>

<p>例子：</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">people_num</span>
<span class="k">FROM</span> <span class="n">employee</span><span class="p">,</span><span class="n">department</span>
<span class="k">WHERE</span> <span class="n">employee</span><span class="p">.</span><span class="n">in_dpt</span> <span class="o">=</span> <span class="n">department</span><span class="p">.</span><span class="n">dpt_name</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">id</span><span class="p">;</span>
</code></pre></div></div>

<p>等价于</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="n">id</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">people_num</span>
<span class="k">FROM</span> <span class="n">employee</span> <span class="k">JOIN</span> <span class="n">department</span>
<span class="k">ON</span> <span class="n">employee</span><span class="p">.</span><span class="n">in_dpt</span> <span class="o">=</span> <span class="n">department</span><span class="p">.</span><span class="n">dpt_name</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">id</span><span class="p">;</span>
</code></pre></div></div>

<p>作用是输出工号，姓名以及所在部门的人数</p>

<h2 id="修改与删除">修改与删除</h2>

<h3 id="基本命令">基本命令</h3>

<ul>
  <li>
    <p>删除数据库</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">DROP</span> <span class="k">DATABASE</span> <span class="n">db_name</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>删除表</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">DROP</span> <span class="k">TABLE</span> <span class="k">table_name</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>重命名表</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">RENAME</span> <span class="k">TABLE</span> <span class="err">原名</span> <span class="k">TO</span> <span class="err">新名字</span><span class="p">;</span>
    
  <span class="k">ALTER</span> <span class="k">TABLE</span> <span class="err">原名</span> <span class="k">RENAME</span> <span class="err">新名</span><span class="p">;</span>
    
  <span class="k">ALTER</span> <span class="k">TABLE</span> <span class="err">原名</span> <span class="k">RENAME</span> <span class="k">TO</span> <span class="err">新名</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="对列进行修改">对列进行修改</h3>

<ul>
  <li>
    <p>增加一列</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">ALTER</span> <span class="k">TABLE</span> <span class="err">表名字</span> <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="err">列名字</span> <span class="err">数据类型</span> <span class="err">约束</span><span class="p">;</span> <span class="o">#</span> <span class="err">方法一</span>
  <span class="k">ALTER</span> <span class="k">TABLE</span> <span class="err">表名字</span> <span class="k">ADD</span> <span class="err">列名字</span> <span class="err">数据类型</span> <span class="err">约束</span><span class="p">;</span> <span class="o">#</span> <span class="err">方法二</span>
</code></pre></div>    </div>

    <ul>
      <li>在指定位置增加一列: 语句最后加上 <code class="language-plaintext highlighter-rouge">AFTER col_1</code></li>
      <li>指定添加到第一列: 使用 <code class="language-plaintext highlighter-rouge">FIRST</code> 关键词</li>
    </ul>
  </li>
  <li>
    <p>删除一列</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">ALTER</span> <span class="k">TABLE</span> <span class="err">表名字</span> <span class="k">DROP</span> <span class="k">COLUMN</span> <span class="err">列名字</span> <span class="err">数据类型</span> <span class="err">约束</span><span class="p">;</span> <span class="o">#</span> <span class="err">方法一</span>
  <span class="k">ALTER</span> <span class="k">TABLE</span> <span class="err">表名字</span> <span class="k">DROP</span> <span class="err">列名字</span> <span class="err">数据类型</span> <span class="err">约束</span><span class="p">;</span> <span class="o">#</span> <span class="err">方法二</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>重命名一列</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">ALTER</span> <span class="k">TABLE</span> <span class="err">表名字</span> <span class="n">CHANGE</span> <span class="err">旧列名</span> <span class="err">新列名</span> <span class="err">数据类型</span> <span class="err">约束</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>改变一列的数据类型</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">ALTER</span> <span class="k">TABLE</span> <span class="err">表名字</span> <span class="k">MODIFY</span> <span class="err">列名</span> <span class="err">新数据类型</span><span class="p">;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>改变一列的内容</p>

    <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">UPDATE</span> <span class="err">表名字</span> <span class="k">SET</span> <span class="err">列</span><span class="mi">1</span><span class="o">=</span><span class="err">值</span><span class="mi">1</span><span class="p">,</span><span class="err">列</span><span class="mi">2</span><span class="o">=</span><span class="err">值</span><span class="mi">2</span> <span class="k">WHERE</span> <span class="err">条件</span><span class="p">;</span>
</code></pre></div>    </div>

    <ul>
      <li>如果这里没有 WHERE 的话，会把 列1 的所有值设置为 值1，把 列2 的所有值设置为 值2</li>
    </ul>
  </li>
</ul>

<h2 id="其他">其他</h2>

<h3 id="索引">索引</h3>

<blockquote>
  <p>索引是一种与表有关的结构，它的作用相当于书的目录，可以根据目录中的页码快速找到所需的内容。 当表中有大量记录时，若要对表进行查询，没有索引的情况是全表搜索：将所有记录一一取出，和查询条件进行一一对比，然后返回满足条件的记录。这样做会消耗大量数据库系统时间，并造成大量磁盘I/O操作。 而如果在表中已<strong>建立索引</strong>，在索引中找到符合查询条件的索引值，通过索引值就可以快速找到表中的数据，可以<strong>大大加快查询速度</strong>。</p>
</blockquote>

<blockquote>
  <p>索引的效果是加快查询速度，当表中数据不够多的时候是感受不出它的效果的。</p>
</blockquote>

<blockquote>
  <p>在使用 SELECT 语句查询的时候，语句中 WHERE 里面的条件，会自动判断有没有可用的索引。</p>
</blockquote>

<ul>
  <li>建立索引</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="err">表名字</span> <span class="k">ADD</span> <span class="k">INDEX</span> <span class="err">索引名</span> <span class="p">(</span><span class="err">列名</span><span class="p">);</span>
<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="err">索引名</span> <span class="k">ON</span> <span class="err">表名字</span> <span class="p">(</span><span class="err">列名</span><span class="p">);</span>
</code></pre></div></div>

<p>例子：在 employee 中建立两个索引,</p>

<p><img src="media/14601908933848/14651243074371.jpg" alt="set w500" /></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">employee</span> <span class="k">ADD</span> <span class="k">INDEX</span> <span class="n">idx_id</span> <span class="p">(</span><span class="n">id</span><span class="p">);</span> 
<span class="o">#</span> <span class="err">在</span> <span class="n">employee</span> <span class="err">表的</span> <span class="n">id</span> <span class="err">列上建立名为</span> <span class="n">idx_id</span> <span class="err">的索引</span>

<span class="k">CREATE</span> <span class="k">INDEX</span> <span class="n">idx_name</span> <span class="k">ON</span> <span class="n">employee</span> <span class="p">(</span><span class="n">name</span><span class="p">);</span>
<span class="o">#</span> <span class="err">在</span> <span class="n">employee</span> <span class="err">表的</span> <span class="n">name</span> <span class="err">列上建立名为</span> <span class="n">idx_name</span> <span class="err">的索引</span>

<span class="k">SHOW</span> <span class="k">INDEX</span> <span class="k">FROM</span> <span class="err">表名字</span>  <span class="o">#</span> <span class="err">查看索引</span>
</code></pre></div></div>

<h3 id="视图">视图</h3>

<blockquote>
  <p>视图是从一个或多个表中导出来的表，是一种虚拟存在的表。它就像一个窗口，通过这个窗口可以看到系统专门提供的数据，这样，用户可以不用看到整个数据库中的数据，而只关心对自己有用的数据。</p>
</blockquote>

<blockquote>
  <ul>
    <li>数据库中只存放了视图的定义，而<strong>没有存放视图中的数据</strong>，这些数据存放在原来的表中；</li>
    <li>使用视图查询数据时，数据库系统会从原来的表中取出对应的数据；</li>
    <li>视图中的数据依赖于原来表中的数据，一旦表中数据发生改变，显示在视图中的数据也会发生改变；</li>
    <li>在使用视图的时候，可以把它当作一张表。</li>
  </ul>
</blockquote>

<blockquote>
  <p>视图也可以建立在多张表上，只需在 SELECT 语句中使用子查询或连接查询。</p>
</blockquote>

<ul>
  <li>创建视图</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">VIEW</span> <span class="err">视图名</span><span class="p">(</span><span class="err">列</span><span class="n">a</span><span class="p">,</span><span class="err">列</span><span class="n">b</span><span class="p">,</span><span class="err">列</span><span class="k">c</span><span class="p">)</span> <span class="k">AS</span> <span class="k">SELECT</span> <span class="err">列</span><span class="mi">1</span><span class="p">,</span><span class="err">列</span><span class="mi">2</span><span class="p">,</span><span class="err">列</span><span class="mi">3</span> <span class="k">FROM</span> <span class="err">表名字</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>例子: 从 employee 表中创建视图</li>
</ul>

<p><img src="media/14601908933848/14651255970651.jpg" alt="set w500" /></p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">VIEW</span> <span class="n">v_emp</span><span class="p">(</span><span class="n">v_name</span><span class="p">,</span> <span class="n">v_age</span><span class="p">,</span> <span class="n">v_phone</span><span class="p">)</span> <span class="k">AS</span> <span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">phone</span> <span class="k">FROM</span> <span class="n">employee</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">v_emp</span><span class="p">;</span>
</code></pre></div></div>

<p>结果：</p>

<p><img src="media/14601908933848/14651257965621.jpg" alt="set w250" /></p>

<h3 id="导入">导入</h3>

<blockquote>
  <p>导入操作，可以把一个文件里的数据保存进一张表。</p>
</blockquote>

<ul>
  <li>语句</li>
</ul>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">LOAD</span> <span class="k">DATA</span> <span class="n">INFILE</span> <span class="s1">'文件路径'</span> <span class="k">INTO</span> <span class="k">TABLE</span> <span class="err">表名字</span><span class="p">;</span>
</code></pre></div></div>

<ul>
  <li>例子</li>
</ul>

<blockquote>
  <p>在 /tmp/SQL6 目录下有一个名为 in.txt 的文件，我们尝试把这个文件中的数据导入数据库 mysql_shiyan 的 employee 表中。</p>
</blockquote>

<p>文件内容</p>

<p><img src="media/14601908933848/14651271214134.jpg" alt="set w400" /></p>

<p>导入前的数据库</p>

<p><img src="media/14601908933848/14651269384787.jpg" alt="set w400" /></p>

<p>命令：</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">LOAT</span> <span class="k">DATA</span> <span class="n">INFILE</span> <span class="s1">'/tmp/SQL6/in.txt'</span> <span class="k">INTO</span> <span class="k">TABLE</span> <span class="n">employee</span><span class="p">;</span>
</code></pre></div></div>

<p>导入之后的数据库</p>

<p><img src="media/14601908933848/14651272132909.jpg" alt="set w400" /></p>

<h3 id="导出">导出</h3>

<blockquote>
  <p>导出与导入是相反的过程，是把数据库某个表中的数据保存到一个文件之中。</p>
</blockquote>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span> <span class="err">列</span><span class="mi">1</span><span class="err">，列</span><span class="mi">2</span> <span class="p">...</span> <span class="k">INTO</span> <span class="n">OUTFILE</span> <span class="s1">'文件路径和文件名'</span> <span class="k">FROM</span> <span class="err">表名字</span><span class="p">;</span>
</code></pre></div></div>

<h3 id="备份">备份</h3>

<blockquote>
  <p>备份与导出的区别：</p>
</blockquote>

<blockquote>
  <ul>
    <li>导出: 只保存数据库中的数据</li>
    <li>备份: 把数据库的结构，包括数据、约束、索引、视图等全部另存为一个文件</li>
  </ul>
</blockquote>

<blockquote>
  <p>mysqldump 是 MySQL 用于备份数据库的实用程序。它主要产生一个 SQL 脚本文件，其中包含从头重新创建数据库所必需的命令 CREATE TABLE INSERT 等。</p>
</blockquote>

<p>语句：</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump <span class="nt">-u</span> root 数据库名&gt;备份文件名<span class="p">;</span>   <span class="c">#备份整个数据库</span>

mysqldump <span class="nt">-u</span> root 数据库名 表名字&gt;备份文件名<span class="p">;</span>  <span class="c">#备份整个表</span>
</code></pre></div></div>

<h3 id="恢复">恢复</h3>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source </span>sql文件＋路径 <span class="c"># 方法一，恢复以前的数据库</span>

mysql <span class="nt">-u</span> root 新数据库名 &lt; sql文件＋路径 <span class="c"># 方法二，将以前的数据库恢复到特定的数据库名里</span>
</code></pre></div></div>


</div>


    </div>

  </body>

</html>

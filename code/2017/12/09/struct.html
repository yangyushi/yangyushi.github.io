<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Python Module Struct</title>
    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="stylesheet" href="/assets/css/styles/github-gist.css">
    <script src="https://unpkg.com/lunr/lunr.js"></script>

    <script src="/assets/js/toc.js"></script>
    <script src="/assets/js/highlight.pack.js"></script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true
        }
      });
    </script>

    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    </head>

  <body>
    <script>hljs.initHighlightingOnLoad();</script>

    <div class="main">
        <div id="side_bar">
    09 Dec 2017
</div>

<div class="center post">
    <ul id="markdown-toc">
  <li><a href="#pack" id="markdown-toc-pack">pack</a></li>
  <li><a href="#calcsize" id="markdown-toc-calcsize">calcsize</a></li>
  <li><a href="#unpack" id="markdown-toc-unpack">unpack</a></li>
</ul>

<hr />

<p>The struct module in python allow us to work with binary data.</p>

<hr />

<h2 id="pack">pack</h2>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">struct.pack(fmt, v1, v2, ...)</code>
Return a bytes object containing the values v1, v2, … packed according to the format string fmt. The arguments must match the values required by the format exactly.</p>
</blockquote>

<p>we can use <code class="language-plaintext highlighter-rouge">pack</code> method to encode numerical data into formatted binary data.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">packed_data</span> <span class="o">=</span> <span class="n">struct</span><span class="p">.</span><span class="nf">pack</span><span class="p">(</span><span class="sh">'</span><span class="s">iif</span><span class="sh">'</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mf">4.7</span><span class="p">)</span> <span class="c1"># iif → int, int, float
</span><span class="nf">print</span><span class="p">(</span><span class="n">packed_data</span><span class="p">)</span>
<span class="sa">b</span><span class="sh">'</span><span class="se">\x06\x00\x00\x00\x13\x00\x00\x00</span><span class="s">ff</span><span class="se">\x96</span><span class="s">@</span><span class="sh">'</span>
</code></pre></div></div>

<h2 id="calcsize">calcsize</h2>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">struct.calcsize(fmt)</code>
Return the size of the struct (and hence of the bytes object produced by pack(fmt, …)) corresponding to the format string fmt.</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">print</span><span class="p">(</span><span class="n">struct</span><span class="p">.</span><span class="nf">calcsize</span><span class="p">(</span><span class="sh">'</span><span class="s">c</span><span class="sh">'</span><span class="p">))</span>
<span class="nf">print</span><span class="p">(</span><span class="n">struct</span><span class="p">.</span><span class="nf">calcsize</span><span class="p">(</span><span class="sh">'</span><span class="s">i</span><span class="sh">'</span><span class="p">))</span>
<span class="nf">print</span><span class="p">(</span><span class="n">struct</span><span class="p">.</span><span class="nf">calcsize</span><span class="p">(</span><span class="sh">'</span><span class="s">f</span><span class="sh">'</span><span class="p">))</span>
<span class="nf">print</span><span class="p">(</span><span class="n">struct</span><span class="p">.</span><span class="nf">calcsize</span><span class="p">(</span><span class="sh">'</span><span class="s">cif</span><span class="sh">'</span><span class="p">))</span>

<span class="mi">1</span>
<span class="mi">4</span>
<span class="mi">4</span>
<span class="mi">12</span>
</code></pre></div></div>

<h2 id="unpack">unpack</h2>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">struct.unpack(fmt, buffer)</code>
Unpack from the buffer buffer (presumably packed by pack(fmt, …)) according to the format string fmt. The result is a tuple even if it contains exactly one item. The buffer’s size in bytes must match the size required by the format, as reflected by calcsize().</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span> <span class="o">=</span> <span class="n">struct</span><span class="p">.</span><span class="nf">unpack</span><span class="p">(</span><span class="sh">'</span><span class="s">iif</span><span class="sh">'</span><span class="p">,</span> <span class="sa">b</span><span class="sh">'</span><span class="se">\x06\x00\x00\x00\x13\x00\x00\x00</span><span class="s">ff</span><span class="se">\x96</span><span class="s">@</span><span class="sh">'</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mf">4.699999809265137</span><span class="p">)</span>
</code></pre></div></div>


</div>


    </div>

  </body>

</html>
